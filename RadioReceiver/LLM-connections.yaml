# Net connections for ESP32-S3 Portable Radio Receiver
# Generated from FSD_ESP32_Radio_Receiver.md
# Uses semantic references: Component_Name.Pin_Name or Component_Name.Pin_Number

nets:
  # === Power Rails ===
  GND:
    - MCU.GND
    - Battery_Charger.GND
    - LDO.GND
    - Radio_IC.GND
    - RGB_LED.VSS           # All 3 LEDs
    - USB_Connector.GND
    - Battery_Connector.2
    - Audio_Jack.SLEEVE
    - OLED_Header.1
    - Reset_Button.2
    - Rotary_Encoder1.C     # Encoder 1 common
    - Rotary_Encoder2.C     # Encoder 2 common
    - R_CC1.2
    - R_CC2.2
    - C_USB_VBUS.2
    - C_BAT_Filter.2        # Both battery filter caps
    - C_LDO_In.2
    - C_LDO_Out.2
    - C_MCU_Bypass.2        # All MCU bypass caps
    - C_Radio_Bypass.2      # All 4 radio bypass
    - C_LED_Bypass.2        # All 3 LED bypass
    - C_Crystal.2           # Both crystal caps
    - R_PROG.2
    - ESD_USB_DP.2
    - ESD_USB_DM.2

  VBUS:
    - USB_Connector.VBUS
    - Battery_Charger.VIN
    - C_USB_VBUS.1

  VBAT:
    - Battery_Charger.BAT
    - Battery_Connector.1
    - LDO.VIN
    - C_BAT_Filter.1        # Both battery filter caps
    - C_LDO_In.1

  +3V3:
    - LDO.VOUT
    - MCU.3V3
    - Radio_IC.VDD
    - Radio_IC.VA
    - Radio_IC.VD
    - RGB_LED.VDD           # All 3 LEDs
    - OLED_Header.2
    - R_I2C_SDA.1
    - R_I2C_SCL.1
    - R_EN_Pullup.1
    - C_LDO_Out.1
    - C_MCU_Bypass.1        # All 3 MCU bypass
    - C_Radio_Bypass.1      # All 4 radio bypass
    - C_LED_Bypass.1        # All 3 LED bypass

  # === I2C Bus ===
  SDA:
    - MCU.GPIO4
    - Radio_IC.SDIO
    - OLED_Header.4
    - R_I2C_SDA.2

  SCL:
    - MCU.GPIO5
    - Radio_IC.SCLK
    - OLED_Header.3
    - R_I2C_SCL.2

  # === USB Data ===
  USB_DP:
    - MCU.GPIO20
    - USB_Connector.DP
    - ESD_USB_DP.1

  USB_DM:
    - MCU.GPIO19
    - USB_Connector.DM
    - ESD_USB_DM.1

  CC1:
    - USB_Connector.CC1
    - R_CC1.1               # CC1 resistor

  CC2:
    - USB_Connector.CC2
    - R_CC2.1               # CC2 resistor

  # === NeoPixel Chain ===
  NEOPIXEL:
    - MCU.GPIO6
    - RGB_LED.DIN           # First LED input

  LED_CHAIN1:
    - RGB_LED.DOUT          # First LED output
    - RGB_LED.DIN           # Second LED input

  LED_CHAIN2:
    - RGB_LED.DOUT          # Second LED output
    - RGB_LED.DIN           # Third LED input

  # === SI4735 Radio ===
  SI4735_RST:
    - MCU.GPIO7
    - Radio_IC.RST

  FM_ANT:
    - Radio_IC.FMI
    - FM_Antenna.1          # Wire antenna

  AM_ANT:
    - Radio_IC.AMI
    - AM_Antenna.1          # Ferrite/loop antenna

  RCLK_IN:
    - Crystal_32K.1
    - Radio_IC.RCLK
    - C_Crystal.1           # First crystal cap

  RCLK_OUT:
    - Crystal_32K.2
    - C_Crystal.2           # Second crystal cap

  # === Audio Output ===
  AUDIO_L:
    - Radio_IC.LOUT
    - R_Audio_L.1

  AUDIO_L_OUT:
    - R_Audio_L.2
    - Audio_Jack.TIP

  AUDIO_R:
    - Radio_IC.ROUT
    - R_Audio_R.1

  AUDIO_R_OUT:
    - R_Audio_R.2
    - Audio_Jack.RING

  # === Encoder 1 (Tuning) ===
  ENC1_A:
    - MCU.GPIO8
    - Rotary_Encoder1.A     # First encoder

  ENC1_B:
    - MCU.GPIO9
    - Rotary_Encoder1.B     # First encoder

  ENC1_SW:
    - MCU.GPIO10
    - Rotary_Encoder1.SW    # First encoder

  # === Encoder 2 (Volume) ===
  ENC2_A:
    - MCU.GPIO21
    - Rotary_Encoder2.A     # Second encoder

  ENC2_B:
    - MCU.GPIO35
    - Rotary_Encoder2.B     # Second encoder

  ENC2_SW:
    - MCU.GPIO36
    - Rotary_Encoder2.SW    # Second encoder

  # === Reset Circuit ===
  EN:
    - MCU.EN
    - R_EN_Pullup.2
    - Reset_Button.1

  # === Battery Charger ===
  PROG:
    - Battery_Charger.PROG
    - R_PROG.1
